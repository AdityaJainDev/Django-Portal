---
version: '3'

services:

    web:
        build: .
        command: bash -c "python manage.py runserver 0.0.0.0:8000"
        volumes:
            - ../portal:/app
        ports:
            - "8000:8000"
        environment:
            - DJANGO_SETTINGS_MODULE=Portal.docker
            - PYTHONUNBUFFERED=1

    prometheus:
        image: prom/prometheus:v2.14.0
        volumes:
            - ../prometheus/:/prometheus/
        command:
            - config.file=/prometheus/prometheus.yml
        ports:
            - 9090:9090